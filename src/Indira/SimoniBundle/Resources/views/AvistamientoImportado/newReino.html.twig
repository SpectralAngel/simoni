{% extends "IndiraSimoniBundle::layout.html.twig" %}
{% block content %}
<div class="row-fluid">
  <div class="span12">
    <section class="page-header">
      <h1>Ingresar un Avistamiento {% if reino is defined %} de {{ reino.nombre }} {% endif%}</h1>
    </section>
  </div>
</div>
<div class="row-fluid">
  <section class="span9">
    <form action="{{ path('avistamiento_importado_create_reino', { 'reino': reino.id }) }}" method="post" {{ form_enctype(form) }}>
      {{ form_widget(form) }}
      <p class="form-actions">
        <button class="btn btn-primary" type="submit">
          <i class="icon-save"></i> Guardar
        </button>
      </p>
    </form>
  </section>
  <aside class="span3">
    <nav class="sidebar">
      <ul class="nav nav-stacked nav-tabs">
        <li>
          <a href="{{ path('avistamiento_importado') }}"> Regresar a Avistamientos </a>
        </li>
      </ul>
    </nav>
  </aside>
</div>
{% endblock %}


{% block javascript %}
<script type="text/javascript">
  
  function addTagForm(collectionHolder, $newLinkLi) {
      // Get the data-prototype explained earlier
      var prototype = collectionHolder.data('prototype');
  
      // get the new index
      var index = collectionHolder.data('index');
  
      // Replace '__name__' in the prototype's HTML to
      // instead be a number based on how many items we have
      var newForm = prototype.replace(/__name__/g, index);
  
      // increase the index with one for the next item
      collectionHolder.data('index', index + 1);
      
      $newLinkLi.before(newForm);
  }

  var collectionHolder = $('#indira_simonibundle_avistamientoimportadotype_imagenes');
  var $addImagenLink = $('<a href="#" class="add_imagen_link btn btn-info">Agregar Imagen</a>');
  
  jQuery(document).ready(function() {
      // add the "add a tag" anchor and li to the tags ul
      collectionHolder.append($addImagenLink);
  
      // count the current form inputs we have (e.g. 2), use that as the new
      // index when inserting a new item (e.g. 2)
      collectionHolder.data('index', collectionHolder.find(':input').length);
  
      $addImagenLink.on('click', function(e) {
          // prevent the link from creating a "#" on the URL
          e.preventDefault();
  
          // add a new tag form (see next code block)
          addTagForm(collectionHolder, $addImagenLink);
      });
  });
</script>
{% endblock %}
