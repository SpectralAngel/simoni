{% extends "IndiraSimoniBundle::layout.html.twig" %}
{% block content %}
<div class="row-fluid">
  <div class="span12">
    <section class="page-header">
      <h1>{{ entity.nombre }}</h1>
    </section>
  </div>
</div>
<div class="row">
  <div class="span12">
    {% for atributo in entity.atributosclave %}
    <a class="btn btn-success" href="{{ asset('bundles/indirasimoni/basetortuga.xlsx') }}" ><i class="icon-download"></i> Descargar Linea de Base</a>
    <a class="btn btn-success" href="{{ asset('bundles/indirasimoni/tortuga.xlsx') }}" ><i class="icon-download"></i> Descargar Hoja de Datos</a>
    <div class="row">
      <div class="span12">
        <div class="row">
          <p class="span12">
            {{ atributo.descripcion }}
            </br></br></br>
          </p>
        </div>
      {% for indicador in atributo.indicadores %}
        <div class="row">
          <p class="span12">
            <span class="label label-info">Indicador de {{ indicador.tipo }}</span> <span>{{ indicador.descripcion }}</span>
          </p>
        </div>
        </br></br>
      {% endfor %}
      </div>
    </div>
    {% endfor %}
    <div id="chartdiv" style="height:400px;width:300px; "></div>
  </div>
</div>
{% endblock %}
{% block javascript %}
<script src="{{ asset('bundles/indirasimoni/js/jquery.jqplot.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('bundles/indirasimoni/js/jqplot.barRenderer.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('bundles/indirasimoni/js/jqplot.categoryAxisRenderer.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('bundles/indirasimoni/js/jqplot.pointLabels.min.js') }}" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function() {
    var s1 = [
    {% for atributo in entity.atributosclave %}
      {% for indicador in atributo.indicadores %}
        {% if indicador.tipo.id == 2 %}-{% endif %}{{ indicador.nivel }},
        {% endfor %}
    {% endfor %}0
    ];
    
    var ticks = [
      {% for atributo in entity.atributosclave %}
      {% for indicador in atributo.indicadores %}
        '{{ indicador.descripcion }}',
        {% endfor %}
    {% endfor %}0
    ];
    
    $.jqplot('chartdiv', [s1], {
        // The "seriesDefaults" option is an options object that will
        // be applied to all series in the chart.
        seriesDefaults:{
            renderer:$.jqplot.BarRenderer,
            rendererOptions: {fillToZero: true}
        },
        axes: {
            // Use a category axis on the x axis and use our custom ticks.
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: ticks
            },
            // Pad the y axis just a little so bars can get close to, but
            // not touch, the grid boundaries.  1.2 is the default padding.
            yaxis: {
                pad: 1.05,
                tickOptions: {formatString: '%d'}
            }
        }
    });
  });
</script>
<link rel="stylesheet" href="{{ asset('bundles/indirasimoni/css/jquery.jqplot.min.css') }}">
{% endblock %}
